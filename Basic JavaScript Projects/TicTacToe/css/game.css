let activePlayer = 'X';
let selectedSquares = [];

function placeXorO(squareNumber) {
    let select = document.getElementById(squareNumber);
    if (!select.textContent) {
        select.textContent = activePlayer;
        selectedSquares.push(squareNumber + activePlayer);
        checkWinConditions();
        activePlayer = (activePlayer === 'X') ? 'O' : 'X';
    }
}

function checkWinConditions() {
    const winCombos = [
        ['0X', '1X', '2X'], ['3X', '4X', '5X'], ['6X', '7X', '8X'],
        ['0O', '1O', '2O'], ['3O', '4O', '5O'], ['6O', '7O', '8O'],
        ['0X', '3X', '6X'], ['1X', '4X', '7X'], ['2X', '5X', '8X'],
        ['0O', '3O', '6O'], ['1O', '4O', '7O'], ['2O', '5O', '8O'],
        ['0X', '4X', '8X'], ['2X', '4X', '6X'],
        ['0O', '4O', '8O'], ['2O', '4O', '6O']
    ];

    for (let combo of winCombos) {
        if (combo.every(item => selectedSquares.includes(item))) {
            drawWinLine(combo);
            return;
        }
    }

    // Check for tie
    if (selectedSquares.length >= 9) {
        setTimeout(() => alert("It's a tie!"), 200);
    }
}

function drawWinLine(combo) {
    const canvas = document.getElementById("win-lines");
    const ctx = canvas.getContext("2d");
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.lineTo(608, 608);
    ctx.lineWidth = 10;
    ctx.strokeStyle = "red";
    ctx.stroke();
    setTimeout(() => alert(`${activePlayer} wins!`), 200);
}
